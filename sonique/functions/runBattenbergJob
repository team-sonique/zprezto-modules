#function runBattenbergJob {
    local battenberg_version=$1
    
    if [ -e ${battenberg_version} ]; then
        local latest=`_get_latest_version battenberg dev`
        battenberg_version=${latest%-*}
    fi
    echo "Running Battenberg Job version $battenberg_version"
    ip_addr=$(ipconfig getifaddr en0)

    (set -x; docker run --rm --name battenberg-job --net=sonique-network --net-alias=battenberg-job -v /data:/app/data  -e "cluster.host=sonique-cluster.sns.sky.com" -e "npr.volume.mount.path=/app/npr" -e "replicas=3" -e "npr.volume.host.server=vm002544.bskyb.com" -e "repo.host=repo.sns.sky.com" -e "npr.volume.host.path=/home/sonique/nfs/npr" -e "npr.volume.name=npr-ftp" -e "limits.memory=4Gi" -e "nodePort=30030" -e "repo.port=8085" -e "jdbc.transaction.context.factory.class=sonique.sql.transaction.factory.OracleTransactionContextFactory" -e "service.summary.status.path=status" -e "app.data.integrity.ignore.window.mins=15" -e "app.data.retention.period.in.days=30" -e "loader.schedule=*/1 * * * *" -e "jdbc.connection.user=battenberg_user" -e "app.file.directory=/app/data/npr" -e "jdbc.connection.password=battenberg" -e "jdbc.connection.url=jdbc:oracle:thin:@//oracle-12c-vdc:1521/db1" -e "app.port=8087" -e "jdbc.connection.driver=oracle.jdbc.pool.OracleDataSource" -e "database.edition=BATTENBERG_3" -e "service.summary.lookup.path=service" -e "service.summary.base.uri=http://$ip_addr:11565/repoman/" -e "app.expected.file.receipt.time=23:59:59" -e TZ=Europe/London repo.sns.sky.com:8085/ukiss/battenberg-job:${battenberg_version})
#}